<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Greendash Dashboard</title>
  <!-- Iconic Fonts -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="../vendors/iconic-fonts/font-awesome/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../vendors/iconic-fonts/flat-icons/flaticon.css">
  <link rel="stylesheet" href="../vendors/iconic-fonts/cryptocoins/cryptocoins.css">
  <link rel="stylesheet" href="../vendors/iconic-fonts/cryptocoins/cryptocoins-colors.css">
  <!-- Bootstrap core CSS -->
  <link href="http://cdn.bootstrapmb.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet">
  <!-- jQuery UI -->
  <link href="../assets/css/jquery-ui.min.css" rel="stylesheet">
  <!-- Page Specific CSS (Slick Slider.css) -->
  <link href="../assets/css/slick.css" rel="stylesheet">
  <!-- Greendash styles -->
  <link href="../assets/css/style.css" rel="stylesheet">
  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="favicon.ico" />
  <style>
    #content {
      background-image: url(../assets/img/login2.jpg);
      background-size: 100%;
      display: flex;
      justify-content: center;
      /* margin: 100px; */
      height: 100vh;
      align-content: center;
    }

    #login {
      position: absolute;
      left: 50%;
      top: 45%;
      transform: translate(-200px, -200px);
      background-color: white;
      height: 550px;
      border-radius: 4%;
      box-shadow: 5px 4px 20px #828282
    }
    #title{
      position: absolute;
      left: 40%;
      top: 14%;
      height:5px;
      font-size:50px;
    }
  </style>



</head>

<body>
<div id="content">
  <div id="title" style="width:400px;">小医院管理系统</div>
  <div id="login" style='width: 400px;'>
    <div class="ms-panel-header" style="text-align: center;">
      <h6>注册Register</h6>
    </div>
    <div class="ms-panel-body">
      <form class="needs-validation" novalidate="">
        <div class="form-row">
          <div class="col-md-12 mb-3">
            <label for="validationCustom01">账户：</label>
            <div class="input-group">
              <input type="text" class="form-control" v-model="username" id="username" placeholder="请输入账户" required="required">
            </div>
          </div>
        </div>
        <!--          电话-->
        <div class="form-row">
          <div class="col-md-12 mb-3">
            <label for="validationCustom02">电话：</label>
            <div class="input-group">
              <input type="phone" class="form-control" v-model="phone"  id="phone" placeholder="请输入电话" required="required">
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="col-md-12 mb-3">
            <label for="validationCustom03">密码</label>
            <div class="input-group">
              <input type="password" class="form-control" v-model="pwd" id="password" placeholder="请输入密码" required="required">
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="col-md-12 mb-3">
            <label for="validationCustom03">确认密码</label>
            <div class="input-group">
              <input type="password" class="form-control" v-model="pwd2" onkeyup="checkpassword" id="rePassword" placeholder="请输入密码" required="required">
            </div>
            <button @click="login" style="background-color: #268E77;border-radius: 50px;"
                    class="btn btn-primary mt-4 d-block w-100" type="button">注册</button>

          </div>
        </div>

      </form>

    </div>
  </div>
</div>


<!-- SCRIPTS -->
<!-- Global Required Scripts Start -->
<script src="../assets/js/jquery-3.3.1.min.js"></script>
<script src="../assets/js/popper.min.js"></script>
<script src="http://cdn.bootstrapmb.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
<script src="../assets/js/perfect-scrollbar.js"> </script>
<script src="../assets/js/jquery-ui.min.js"> </script>
<!-- Global Required Scripts End -->

<!-- Page Specific Scripts Start -->
<script src="../assets/js/moment.js"> </script>
<script src="../assets/js/jquery.webticker.min.js"> </script>
<!--  <script src="../assets/js/Chart.bundle.min.js"> </script>-->
<!--  <script src="../assets/js/Chart.Financial.js"> </script>-->
<!--  <script src="../assets/js/table-line.js"> </script>-->
<!--  <script src="../assets/js/index-chart.js"> </script>-->

<script src="../assets/js/d3.v3.min.js"> </script>
<script src="../assets/js/topojson.v1.min.js"> </script>
<!--  <script src="../assets/js/datamaps.all.min.js"> </script>-->
<!--  <script src="../assets/js/index-map.js"> </script>-->

<!-- Page Specific Scripts End -->

<!-- Greendash core JavaScript -->
<script src="../assets/js/framework.js"></script>

<!-- Settings -->
<script src="../assets/js/settings.js"></script>
<script src="../assets/js/vue.js"></script>
<script src="../assets/js/axios.min.js"></script>
<script>
  var vm = new Vue({
    el:"#content",
    data:{
      username:'',
      pwd:'',
      phone:''
    },

    methods: {
      login:function(){
        var password = document.getElementById("password").value;
        var rePassword = document.getElementById("rePassword").value;
        var username = document.getElementById("username") .value;
        var phone = document.getElementById("phone") .value;
        if (password == rePassword) {
          //通过axios发送数据到后端
          axios.post('http://localhost:8080/user/register',`username=${this.username}&phone=${this.phone}&pwd=${this.pwd}`).then(
                  response => {
                    if(response.data.code==200){//登录成功 ,里面一定有带过来的user response.data.data

                      //将response.data.data这个json对象转换为json字符串
                      var userStr = JSON.stringify(response.data.data);
                      //将userStr存储起来，存到localStorage

                      localStorage.setItem("user",userStr);
                      //转到主页面
                      location.href="./login.html";
                    }else{
                      alert("两次密码输入不一致");

                    }

                  },
                  error => {console.log('失败了',error);}
          )

        } else {
          alert("两次密码输入不一致");
        }


      },
    },


  })

</script>
</body>

</html>